# 大姨 - 项目开发规范

## UI 设计规范

### 响应式设计
所有 UI 尺寸必须使用屏幕比例,而非固定像素值。

**基准设备**:iPhone 15 (393×852 pt)

**转换公式**:
- 垂直:`geometry.size.height * 比例值`
- 水平:`geometry.size.width * 比例值`
- 比例值 = 固定值 / 基准值(垂直852,水平393)

**代码编写规范**:
- **直接使用计算好的比例值**,不要在代码中写除法表达式
- 保留4位小数即可

**示例**:
```swift
// ❌ 错误
.padding(.top, 110)

// ❌ 错误 - 不要在代码中写除法
.padding(.top, geometry.size.height * (110.0 / 852.0))

// ✅ 正确 - 直接使用计算好的比例值
.padding(.top, geometry.size.height * 0.1291) // 日期标题顶部间距
```

---

## 代码注释规范

### 注释原则
注释应解释**语义和用途**,而非重复代码中已有的信息。

**严禁在注释中包含计算公式或数值**,只需描述用途。

**涉及到样式、显示的注释要打清晰点**,让人一眼就能理解这段代码的用途。

### ❌ 错误示例
```swift
// 4/852
.padding(.top, geometry.size.height * 0.0047)

// 角标字号 10/852
.font(.system(size: geometry.size.height * 0.0117))

// #FF5A7D
let color = Color(red: 255/255, green: 90/255, blue: 125/255)

// 39.84/852,介于44和35.78之间
.frame(height: geometry.size.height * 0.0468)

// 按钮高度 44
.frame(height: geometry.size.height * 0.0516)
```

**问题**:
- 包含计算比例 `4/852`、`10/852`
- 包含像素值 `44`
- 包含颜色代码 `#FF5A7D`
- 包含冗余计算说明 `介于44和35.78之间`

### ✅ 正确示例
```swift
// 文案行间距
.padding(.top, geometry.size.height * 0.0047)

// 角标字号
.font(.system(size: geometry.size.height * 0.0117))

// 经期中状态的主题色
let color = Color(red: 255/255, green: 90/255, blue: 125/255)

// 按钮高度
.frame(height: geometry.size.height * 0.0468)

// 记录按钮高度
.frame(height: geometry.size.height * 0.0516)
```

### 注释内容要求
- **组件/区域**:说明这是什么UI元素(如:日期标题、周历区域、编辑按钮)
- **颜色**:说明颜色的用途(如:选中状态背景色、经期中状态的主题色),**禁止写颜色代码**
- **间距/尺寸**:说明间距或尺寸的作用(如:按钮与文案间距、角标字号),**禁止写计算公式或像素值**
- **状态/逻辑**:说明判断条件的业务含义(如:判断是否在经期内、检查是否有历史记录)

---

## 代码修改原则

### 1. 性能优化(可直接执行)
不改变业务逻辑的优化:
- 使用 LazyVStack/LazyHStack
- 优化算法和计算
- 减少重复渲染
- 代码结构重构

### 2. 逻辑修改(必须先确认)
任何改变业务行为的修改:
- 修改日期范围、数据来源
- 调整默认值、初始状态
- 修改 UI 行为
- 功能增删

**原则**:
- 不确定时,先询问用户
- 提供多个方案供选择
- 获得明确同意后再执行

---

## 构建规则

**禁止自动构建**:
- 禁止自动执行 `xcodebuild` 构建命令
- 禁止在修改代码后自动验证编译
- 只在用户明确要求时才执行构建操作
- 用户会在 Xcode IDE 中自行验证和测试
